I'm not proficient in Ruby, there might be a better way to do some of
this stuff.
